---
name: prettier-ruby
version_cmd: |
  cd /app &&  bundle info prettier | sed '/.*prettier (\(.*\))$/!d; s//v\1/'
command:
  - rbprettier
  - "--write"
include:
  - "**/*.rb"
interpreters:
  - ruby
documentation:
  - https://prettier.io/docs/en/
  - https://github.com/prettier/plugin-ruby
metadata:
  languages:
    - Ruby
  tests:
    - extension: rb
      contents: |2
               d=[30644250780,9003106878,
           30636278846,66641217692,4501790980,
        671_24_603036,131_61973916,66_606629_920,
          30642677916,30643069058];a,s=[],$*[0]
             s.each_byte{|b|a<<("%036b"%d[b.
                chr.to_i]).scan(/\d{6}/)}
                 a.transpose.each{ |a|
                   a.join.each_byte{\
                    |i|print i==49?\
                      ($*[1]||"#")\
                        :32.chr}
                          puts
                           }
      restyled: |
        d = [
          30_644_250_780,
          9_003_106_878,
          30_636_278_846,
          66_641_217_692,
          4_501_790_980,
          671_24_603036,
          131_61973916,
          66_606629_920,
          30_642_677_916,
          30_643_069_058
        ]
        a, s = [], $*[0]
        s.each_byte { |b| a << ('%036b' % d[b.chr.to_i]).scan(/\d{6}/) }
        a.transpose.each do |a|
          a.join.each_byte { |i| print i == 49 ? ($*[1] || '#') : 32.chr }
          puts
        end
