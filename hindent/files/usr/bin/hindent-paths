#!/bin/bash
#
# hindent only supports reformating one file at a time, so we'll use this small
# wrapper to accept options and paths and call hindent once per path with the
# same options each time.
#
# Usage:
#
#     hindent-paths [OPTION, ...] [--] [PATH, ...]
#
# TODO: upstream functionality at or around https://bit.ly/2IMJtyT.
#
###
set -e

flags=()
paths=()

while [ -n "$1" ]; do
	case "$1" in
	# If we see help, output and exit here
	--help)
		hindent --help
		exit $?
		;;

	--)
		shift
		break
		;;
	-*) flags+=("$1") ;;
	*) paths+=("$1") ;;
	esac

	shift
done

# Collect any remaining paths, in case -- was used.
paths+=("$@")

for path in "${paths[@]}"; do
	hindent "${flags[@]}" "$path"
done
